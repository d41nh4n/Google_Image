<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .calendar {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            align-items: center;
            margin-bottom: 10px;
        }

        .calendar-header button {
            padding: 5px 10px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .calendar-header button:hover {
            background-color: #0056b3;
        }

        .month-name {
            font-size: 20px;
            font-weight: bold;
        }

        .weekdays, .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            width: 100%;
        }

        .weekdays div {
            text-align: center;
            padding: 10px 0;
            font-weight: bold;
            background-color: #007bff;
            color: white;
            border: 1px solid #ddd;
        }

        .days div {
            text-align: center;
            padding: 10px 0;
            border: 1px solid #ddd;
            min-height: 40px;
            box-sizing: border-box;
        }

        .day input {
            display: none;
        }

        .day label {
            display: block;
            cursor: pointer;
        }

        .day input:checked + label {
            background-color: #007bff;
            color: white;
            border-radius: 50%;
        }

        button.submit {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
        }

        button.submit:hover {
            background-color: #0056b3;
        }

        .select-days-container {
            margin-top: 20px;
        }

        .select-days-container input {
            padding: 5px;
            font-size: 16px;
            width: 50px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Select Days from the Calendar</h1>
    <div class="calendar">
        <div class="calendar-header">
            <button onclick="prevMonth()">&#8249;</button>
            <div class="month-name" id="month-name">January 2024</div>
            <button onclick="nextMonth()">&#8250;</button>
        </div>
        <div class="weekdays">
            <div>Sun</div>
            <div>Mon</div>
            <div>Tue</div>
            <div>Wed</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
        </div>
        <div class="days" id="days"></div>
    </div>
    <div class="select-days-container">
        <label for="max-days">Max days to select:</label>
        <input type="number" id="max-days" value="5" min="1">
    </div>
    <button class="submit" onclick="submitSelection()">Submit</button>

    <script>
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();

        // List to keep track of selected days
        const selectedDaysList = [];

        function updateCalendar() {
            const daysContainer = document.getElementById('days');
            daysContainer.innerHTML = '';
            const monthNameDiv = document.getElementById('month-name');
            monthNameDiv.innerText = `${monthNames[currentMonth]} ${currentYear}`;

            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const monthDays = new Date(currentYear, currentMonth + 1, 0).getDate();

            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                daysContainer.appendChild(emptyDiv);
            }

            for (let day = 1; day <= monthDays; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day';

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `day${day}`;
                checkbox.dataset.date = `${currentYear}-${currentMonth + 1}-${day}`;

                const label = document.createElement('label');
                label.setAttribute('for', checkbox.id);
                label.innerText = day;

                // Check if the day is already selected
                if (selectedDaysList.includes(checkbox.dataset.date)) {
                    checkbox.checked = true;
                }

                checkbox.addEventListener('change', handleCheckboxChange);

                dayDiv.appendChild(checkbox);
                dayDiv.appendChild(label);
                daysContainer.appendChild(dayDiv);
            }

            // Ensure max days selection is enforced
            enforceMaxDaysSelection();
        }

        function handleCheckboxChange(event) {
            const maxDays = parseInt(document.getElementById('max-days').value);

            const day = parseInt(event.target.id.replace('day', ''));
            const selectedDate = new Date(currentYear, currentMonth, day);

            if (selectedDate < currentDate) {
                alert('You cannot select a date earlier than today.');
                event.target.checked = false;
                return;
            }

            const dateStr = event.target.dataset.date;
            if (event.target.checked) {
                selectedDaysList.push(dateStr);
            } else {
                const index = selectedDaysList.indexOf(dateStr);
                if (index > -1) {
                    selectedDaysList.splice(index, 1);
                }
            }

            if (selectedDaysList.length > maxDays) {
                alert('You have exceeded the maximum number of days you can select.');
                event.target.checked = false;
                const lastSelectedDate = selectedDaysList.pop();
                document.querySelector(`input[data-date='${lastSelectedDate}']`).checked = false;
            }
        }

        function enforceMaxDaysSelection() {
            const maxDays = parseInt(document.getElementById('max-days').value);

            while (selectedDaysList.length > maxDays) {
                const lastSelectedDate = selectedDaysList.pop();
                document.querySelector(`input[data-date='${lastSelectedDate}']`).checked = false;
            }
        }

        function prevMonth() {
            if (currentMonth === 0) {
                currentMonth = 11;
                currentYear--;
            } else {
                currentMonth--;
            }
            updateCalendar();
        }

        function nextMonth() {
            if (currentMonth === 11) {
                currentMonth = 0;
                currentYear++;
            } else {
                currentMonth++;
            }
            updateCalendar();
        }

        function submitSelection() {
            if (selectedDaysList.length > 0) {
                alert('Selected days: ' + selectedDaysList.join(', '));
            } else {
                alert('No days selected');
            }
        }

        document.addEventListener('DOMContentLoaded', updateCalendar);
    </script>
</body>
</html>
